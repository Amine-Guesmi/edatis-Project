{% extends 'base.html' %}
{% block body %}
  {% include "header.html" %}
  <div class="page-header row no-gutters py-4">
    <div class="col-12 col-sm-4 text-center text-sm-left mb-0">
      <span class="text-uppercase page-subtitle">Dashboard</span>
      <h3 class="page-title">Edatis Overview</h3>
    </div>
  </div><!-- End Page Header -->
  <div class="Row">
    <!-- datatable -->

    <div class="col-lg-12 col-md-16 col-sm-16 mb-4">
      <div class="card-header border-bottom">
        {% for message in messages %}
          <div class="alert alert-dismissible alert-success">
            <button type="button" class="close" data-dismiss="alert">&times;</button>
            <strong>Well done!</strong> {{message}}.
          </div>
        {% endfor %}
        <div class="card-header border-bottom">
          <h6 class="m-0">list Of Users</h6>
        </div>
        <div class="container mb-5 mt-3" style="width: 100%">
          <table class="table table-striped table-bordered mydatatable" style="width: 100%">
            <thead>
              <tr>
                <th>id</th>
                <th>User Name</th>
                <th>Email</th>
                <th>Role</th>
                <th class="text-right">Action</th>
              </tr>
            </thead>
            <tbody>
              {% for user in users %}
                  <tr>
                    <td>{{user.id}}</td>
                    <td>{{user.username}}</td>
                    <td>{{user.email}}</td>
                    <td>
                      {% for role in user.groups.all %}
                          {{ role.name }}
                      {% endfor %}
                    </td>
                    <td class="text-right" >
                      {% for role in user.groups.all %}
                            {% if role.name in 'waiter'  %}
                              <a href="{% url 'edatis_dashbord:activateWaiter' user.username %}"><span class="badge badge-pill badge-success">Activate</span></a>
                            {% endif %}
                      {% endfor %}
                      <span class="badge badge-pill badge-primary">info</span>
                      <span class="badge badge-pill badge-danger">remove</span>
                      <span class="badge badge-pill badge-warning">Edit</span>
                    </td>
                  </tr>
              {% endfor %}
            </tbody>
            <tfoot>
              <tr>
                <th>id</th>
                <th>User Name</th>
                <th>Email</th>
                <th>Role</th>
                <th class="text-right" >Action</th>
              </tr>
            </tfoot>
          </table>
        </div>
      </div>
    </div><!-- end datatable -->
  </div>
{% endblock %}
